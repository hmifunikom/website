var handleHomeContentHeight=function(){$("#home").height($(window).height())};var handleHeaderNavigationState=function(){$(window).on("scroll load",function(){if($("#header").attr("data-state-change")!="disabled"){var b=$(window).scrollTop();var a=$("#header").height();if(b>=a){$("#header").addClass("navbar-small")}else{$("#header").removeClass("navbar-small")}}})};var handleAddCommasToNumber=function(a){return a.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")};var handlePageContainerShow=function(){$("#page-container").addClass("in")};var handlePaceLoadingPlugins=function(){Pace.on("hide",function(){$(".pace").addClass("hide")})};var handlePageScrollContentAnimation=function(){$('[data-scrollview="true"]').each(function(){var b=$(this);var a=scrollMonitor.create(b,60);a.enterViewport(function(){$(b).find("[data-animation=true]").each(function(){var c=$(this).attr("data-animation-type");var d=$(this);if(!$(d).hasClass("contentAnimated")){$(this).addClass(c+" contentAnimated")}})})})};var handleHeaderScrollToAction=function(){$("[data-click=scroll-to-target]").on("click",function(d){d.preventDefault();d.stopPropagation();var c=$(this).attr("href");var a=50;$("html, body").animate({scrollTop:$(c).offset().top-a},500);if($(this).attr("data-toggle")=="dropdown"){var b=$(this).closest("li.dropdown");if($(b).hasClass("open")){$(b).removeClass("open")}else{$(b).addClass("open")}}});$(document).click(function(a){if(!a.isPropagationStopped()){$(".dropdown.open").removeClass("open")}})};var handleTooltipActivation=function(){if($("[data-toggle=tooltip]").length!==0){$("[data-toggle=tooltip]").tooltip("hide")}};var targetTop;var typeAjax;var handleSidebarAjaxClick=function(){$("#header [data-toggle=ajax]").click(function(){var a=$(this).closest("li");var b=$(this).parents();$("#header li").not(a).not(b).removeClass("active");$(a).addClass("active");$(b).addClass("active")});$.pjax.defaults.timeout=10000;$(document).on("click","#header [data-toggle=ajax], #ajax-content [data-toggle=ajax]",function(c){var b=$("#ajax-content");$.pjax.click(c,{container:b});window.targetTop="ajax-content";window.typeAjax="full";var a=$(".navbar-toggle");if(a.css("display")!="none"&&!a.hasClass("collapse")){a.click()}});$(document).on("click",".pagination a",function(b){var c=$(b.currentTarget);var a=$("#ajax-content");$.pjax.click(b,{container:a});window.targetTop=c.closest(".content").attr("id");window.typeAjax="partial"});$(document).on("submit","#ajax-content form[data-pjax]",function(c){var d=$(c.currentTarget);var e=d.attr("method");window.targetTop=d.closest(".content").attr("id");window.typeAjax="partial";if(e=="GET"){var b=d.attr("action")+"?"+d.serialize();$.pjax({url:b,container:"#ajax-content"})}else{var a={dataType:"json",beforeSubmit:function(){Pace.restart()},success:function(g,f,h){if(h.status==200){if(d.data("pjax-success")){window[d.data("pjax-success")](g,f,h)}else{$.pjax({url:g.url,container:"#ajax-content"})}}},error:function(i,f,h){if(i.status==422){var g=jQuery.parseJSON(i.responseText);handleFormAjaxError(g)}if(i.status==500){handleErrorNotification("Baru saja sistem gagal melakukan operasi. Silahkan ulangi atau tunggu beberapa saat. Jika masih terjadi kesalahan silahkan hubungi administrator.")}}};handleConfirmation(d,function(){d.ajaxSubmit(a)})}c.preventDefault()});$(document).on("pjax:beforeSend",function(){Pace.restart();$(".jvectormap-label, .jvector-label, .AutoFill_border ,#gritter-notice-wrapper, .ui-autocomplete, .colorpicker, .FixedHeader_Header, .FixedHeader_Cloned .lightboxOverlay, .lightbox").remove()});$(document).on("pjax:beforeReplace",function(){scrollingTextStop()});$(document).on("pjax:success",function(){var b=$("#"+window.targetTop);var a=$("html, body");a.animate({scrollTop:b.offset().top},0);a.bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(c){if(c.which>0||c.type==="mousedown"||c.type==="mousewheel"){a.stop().unbind("scroll mousedown DOMMouseScroll mousewheel keyup")}})})};var scrollingTextInt;var scrollingText=function(){var h=document.getElementsByClassName("word");var f=[];var e=0;h[e].style.opacity=1;for(var d=0;d<h.length;d++){a(h[d])}function c(){var k=f[e];var j=e==h.length-1?f[0]:f[e+1];for(var l=0;l<k.length;l++){b(k,l)}for(var l=0;l<j.length;l++){j[l].className="letter behind";j[0].parentElement.style.opacity=1;g(j,l)}e=(e==f.length-1)?0:e+1}function b(j,k){setTimeout(function(){j[k].className="letter out"},k*80)}function g(j,k){setTimeout(function(){j[k].className="letter in"},340+(k*80))}function a(m){var l=m.innerHTML;m.innerHTML="";var n=[];for(var j=0;j<l.length;j++){var k=document.createElement("span");k.className="letter";k.innerHTML=l.charAt(j);m.appendChild(k);n.push(k)}f.push(n)}c();scrollingTextInt=setInterval(c,4000)};var scrollingTextStop=function(){clearInterval(scrollingTextInt)};var keys=[];var handleFormAjaxError=function(c){for(var b=0;b<keys.length;b++){formClearError(keys[b])}keys=[];for(var a in c){if(c.hasOwnProperty(a)){keys.push(a)}}for(var b=0;b<keys.length;b++){formShowError(keys[b],c[keys[b]])}};var temphints={};var formShowError=function(a,d){var c=$("[name="+a+"]");var b=c.closest(".form-group");b.addClass("has-error");if(b.find(".help-block").length){if(!temphints.hasOwnProperty(a)){temphints[a]=b.find(".help-block").text()}b.find(".help-block").text(d)}else{var d=$("<span />").text(d).addClass("help-block");if(b.children().last().is("input")||b.children().last().is("select")||b.children().last().is("textarea")){b.append(d)}else{b.children().last().append(d)}}};var formClearError=function(a){var c=$("[name="+a+"]");var b=c.closest(".form-group");b.removeClass("has-error");if(temphints.hasOwnProperty(a)){b.find(".help-block").text(temphints[a])}else{b.find(".help-block").remove()}};var handleErrorNotification=function(a){bootbox.alert("Baru saja sistem gagal melakukan operasi. Silahkan ulangi atau tunggu beberapa saat.")};var handleConfirmation=function(a,b){if(a.data("confirm")){bootbox.dialog({message:a.data("confirm"),title:"Konfirmasi",buttons:{main:{label:"Tidak",className:"btn-default btn-sm",callback:function(){}},success:{label:"Ya",className:"btn-danger btn-sm",callback:b}}})}else{b()}};var App=function(){return{init:function(){handleHomeContentHeight();handleHeaderNavigationState();handlePageContainerShow();handlePaceLoadingPlugins();handlePageScrollContentAnimation();handleHeaderScrollToAction();handleTooltipActivation();handleSidebarAjaxClick()},setPageTitle:function(a){document.title=a},scrollingText:scrollingText,restartGlobalFunction:function(){handleHomeContentHeight();handleHeaderNavigationState();handlePageContainerShow();handlePaceLoadingPlugins();handlePageScrollContentAnimation();handleHeaderScrollToAction();handleTooltipActivation()}}}();