var handleSlimScroll=function(){$("[data-scrollbar=true]").each(function(){generateSlimScroll($(this))})};var generateSlimScroll=function(c){var a=$(c).attr("data-height");a=(!a)?$(c).height():a;var b={height:a,alwaysVisible:true};if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){$(c).css("height",a);$(c).css("overflow-x","scroll")}else{$(c).slimScroll(b)}};var handleSidebarMenu=function(){$(".sidebar .nav > .has-sub > a").click(function(){var b=$(this).next(".sub-menu");var a=".sidebar .nav > li.has-sub > .sub-menu";if($(".page-sidebar-minified").length===0){$(a).not(b).slideUp(250,function(){$(this).closest("li").removeClass("expand")});$(b).slideToggle(250,function(){var c=$(this).closest("li");if($(c).hasClass("expand")){$(c).removeClass("expand")}else{$(c).addClass("expand")}})}});$(".sidebar .nav > .has-sub .sub-menu li.has-sub > a").click(function(){if($(".page-sidebar-minified").length===0){var a=$(this).next(".sub-menu");$(a).slideToggle(250)}})};var handleMobileSidebarToggle=function(){var a=false;$(".sidebar").on("click touchstart",function(b){if($(b.target).closest(".sidebar").length!==0){a=true}else{a=false;b.stopPropagation()}});$(document).on("click touchstart",function(b){if($(b.target).closest(".sidebar").length===0){a=false}if(!b.isPropagationStopped()&&a!==true){if($("#page-container").hasClass("page-sidebar-toggled")){a=true;$("#page-container").removeClass("page-sidebar-toggled")}if($("#page-container").hasClass("page-right-sidebar-toggled")){a=true;$("#page-container").removeClass("page-right-sidebar-toggled")}}});$("[data-click=right-sidebar-toggled]").click(function(d){d.stopPropagation();var b="#page-container";var c="page-right-sidebar-collapsed";c=($(window).width()<979)?"page-right-sidebar-toggled":c;if($(b).hasClass(c)){$(b).removeClass(c)}else{if(a!==true){$(b).addClass(c)}else{a=false}}if($(window).width()<480){$("#page-container").removeClass("page-sidebar-toggled")}});$("[data-click=sidebar-toggled]").click(function(d){d.stopPropagation();var c="page-sidebar-toggled";var b="#page-container";if($(b).hasClass(c)){$(b).removeClass(c)}else{if(a!==true){$(b).addClass(c)}else{a=false}}if($(window).width()<480){$("#page-container").removeClass("page-right-sidebar-toggled")}})};var handleSidebarMinify=function(){$("[data-click=sidebar-minify]").click(function(c){c.preventDefault();var b="page-sidebar-minified";var a="#page-container";if($(a).hasClass(b)){$(a).removeClass(b);if($(a).hasClass("page-sidebar-fixed")){generateSlimScroll($('#sidebar [data-scrollbar="true"]'))}}else{$(a).addClass(b);if($(a).hasClass("page-sidebar-fixed")){$('#sidebar [data-scrollbar="true"]').slimScroll({destroy:true});$('#sidebar [data-scrollbar="true"]').removeAttr("style")}$("#sidebar [data-scrollbar=true]").trigger("mouseover")}$(window).trigger("resize")})};var handlePageContentView=function(){$.when($("#page-loader").addClass("hide")).done(function(){$("#page-container").addClass("in")})};var handlePanelAction=function(){$("[data-click=panel-remove]").hover(function(){$(this).tooltip({title:"Remove",placement:"bottom",trigger:"hover",container:"body"});$(this).tooltip("show")});$("[data-click=panel-remove]").click(function(a){a.preventDefault();$(this).tooltip("destroy");$(this).closest(".panel").remove()});$("[data-click=panel-collapse]").hover(function(){$(this).tooltip({title:"Collapse / Expand",placement:"bottom",trigger:"hover",container:"body"});$(this).tooltip("show")});$("[data-click=panel-collapse]").click(function(a){a.preventDefault();$(this).closest(".panel").find(".panel-body").slideToggle()});$("[data-click=panel-reload]").hover(function(){$(this).tooltip({title:"Reload",placement:"bottom",trigger:"hover",container:"body"});$(this).tooltip("show")});$("[data-click=panel-reload]").click(function(d){d.preventDefault();var c=$(this).closest(".panel");if(!$(c).hasClass("panel-loading")){var a=$(c).find(".panel-body");var b='<div class="panel-loader"><span class="spinner-small"></span></div>';$(c).addClass("panel-loading");$(a).prepend(b);setTimeout(function(){$(c).removeClass("panel-loading");$(c).find(".panel-loader").remove()},2000)}});$("[data-click=panel-expand]").hover(function(){$(this).tooltip({title:"Expand / Compress",placement:"bottom",trigger:"hover",container:"body"});$(this).tooltip("show")});$("[data-click=panel-expand]").click(function(g){g.preventDefault();var f=$(this).closest(".panel");var b=$(f).find(".panel-body");var c=40;if($(b).length!==0){var h=$(f).offset().top;var d=$(b).offset().top;c=d-h}if($("body").hasClass("panel-expand")&&$(f).hasClass("panel-expand")){$("body, .panel").removeClass("panel-expand");$(".panel").removeAttr("style");$(b).removeAttr("style")}else{$("body").addClass("panel-expand");$(this).closest(".panel").addClass("panel-expand");if($(b).length!==0&&c!=40){var a=40;$(f).find(" > *").each(function(){var e=$(this).attr("class");if(e!="panel-heading"&&e!="panel-body"){a+=$(this).height()+30}});if(a!=40){$(b).css("top",a+"px")}}}$(window).trigger("resize")})};var handleDraggablePanel=function(){var b=$(".panel").parent("[class*=col]");var a=".panel-heading";var c=".row > [class*=col]";$(b).sortable({handle:a,connectWith:c,stop:function(d,e){e.item.find(".panel-title").append('<i class="fa fa-refresh fa-spin m-l-5" data-id="title-spinner"></i>');handleSavePanelPosition(e.item)}})};var handelTooltipPopoverActivation=function(){$("[data-toggle=tooltip]").tooltip();$("[data-toggle=popover]").popover()};var handleScrollToTopButton=function(){$(document).scroll(function(){var a=$(document).scrollTop();if(a>=200){$("[data-click=scroll-top]").addClass("in")}else{$("[data-click=scroll-top]").removeClass("in")}});$("[data-click=scroll-top]").click(function(a){a.preventDefault();$("html, body").animate({scrollTop:$("body").offset().top},500)})};var handleAfterPageLoadAddClass=function(){if($("[data-pageload-addclass]").length!==0){$(window).load(function(){$("[data-pageload-addclass]").each(function(){var a=$(this).attr("data-pageload-addclass");$(this).addClass(a)})})}};var default_content='<div class="p-t-40 p-b-40 text-center f-s-20 content"><i class="fa fa-warning fa-lg text-muted m-r-5"></i> <span class="f-w-600 text-inverse">Error 404! Page not found.</span></div>';var handleSidebarAjaxClick=function(){$(".sidebar [data-toggle=ajax]").click(function(){var a=$(this).closest("li");var b=$(this).parents();$(".sidebar li").not(a).not(b).removeClass("active");$(a).addClass("active");$(b).addClass("active")});$.pjax.defaults.timeout=10000;$(document).on("click",".sidebar [data-toggle=ajax], #ajax-content a[data-pjax], .pagination a",function(a){var b=$(a.currentTarget);handleConfirmation(b,function(){var c=$("#ajax-content");$.pjax.click(a,{container:c})})});$(document).on("submit","#ajax-content form[data-pjax]",function(b){var c=$(b.currentTarget);var a={beforeSubmit:function(){Pace.restart()},success:function(e,d,f){if(f.status==200){var e=jQuery.parseJSON(e);if(c.data("pjax-success")){window[c.data("pjax-success")](e,d,f)}else{$.pjax({url:e.url,container:"#ajax-content"})}if(e.msg){handleParseNotification(e.msg)}}},error:function(g,d,f){if(g.status==422){var e=jQuery.parseJSON(g.responseText);handleFormAjaxError(e)}if(g.status==500){handleErrorNotification("Baru saja sistem gagal melakukan operasi. Silahkan ulangi atau tunggu beberapa saat. Jika masih terjadi kesalahan silahkan hubungi administrator.")}}};handleConfirmation(c,function(){c.ajaxSubmit(a)});b.preventDefault()});$(document).on("pjax:beforeSend",function(){Pace.restart();$(".jvectormap-label, .jvector-label, .AutoFill_border ,#gritter-notice-wrapper, .ui-autocomplete, .colorpicker, .FixedHeader_Header, .FixedHeader_Cloned .lightboxOverlay, .lightbox").remove()});$(document).on("pjax:beforeReplace",function(){$("html, body").animate({scrollTop:$("body").offset().top},250)});$(document).on("pjax:success",function(){});$(document).on("pjax:error",function(c,d,b,a){console.log(d)})};var keys=[];var handleFormAjaxError=function(c){for(var b=0;b<keys.length;b++){formClearError(keys[b])}keys=[];for(var a in c){if(c.hasOwnProperty(a)){keys.push(a)}}for(var b=0;b<keys.length;b++){formShowError(keys[b],c[keys[b]])}};var temphints={};var formShowError=function(a,d){var c=$("[name="+a+"]");var b=c.closest(".form-group");b.addClass("has-error");if(b.find(".help-block").length){if(!temphints.hasOwnProperty(a)){temphints[a]=b.find(".help-block").text()}b.find(".help-block").text(d)}else{var d=$("<span />").text(d).addClass("help-block");b.children().last().append(d)}};var formClearError=function(a){var c=$("[name="+a+"]");var b=c.closest(".form-group");b.removeClass("has-error");if(temphints.hasOwnProperty(a)){b.find(".help-block").text(temphints[a])}else{b.find(".help-block").remove()}};var handleNotification=function(c,b,a){$.gritter.add({title:c,text:b,sticky:a,time:"10000"})};var handleParseNotification=function(a){handleNotification(a.title,a.text,a.sticky)};var handleErrorNotification=function(a){handleNotification("Oops.. Sesuatu yang tidak diinginkan!",a,true)};var handleConfirmation=function(a,b){if(a.data("confirm")){bootbox.dialog({message:a.data("confirm"),title:"Konfirmasi",buttons:{main:{label:"Tidak",className:"btn-default btn-sm",callback:function(){}},success:{label:"Ya",className:"btn-danger btn-sm",callback:b}}})}else{b()}};var handlePaceLoadingPlugins=function(){Pace.on("hide",function(){$(".pace").addClass("hide")})};var handleIEFullHeightContent=function(){var b=window.navigator.userAgent;var a=b.indexOf("MSIE ");if(a>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){$('.vertical-box-row [data-scrollbar="true"][data-height="100%"]').each(function(){var d=$(this).closest(".vertical-box-row");var c=$(d).height();$(d).find(".vertical-box-cell").height(c)})}};var handleUnlimitedTabsRender=function(){function c(j,i){var g=parseInt($(j).css("margin-left"));var d=$(j).width();var e=$(j).find("li.active").width();var f=(i>-1)?i:150;var k=0;$(j).find("li.active").prevAll().each(function(){e+=$(this).width()});$(j).find("li").each(function(){k+=$(this).width()});if(e>=d){var h=e-d;if(k!=e){h+=40}$(j).find(".nav.nav-tabs").animate({marginLeft:"-"+h+"px"},f)}if(e!=k&&k>=d){$(j).addClass("overflow-right")}else{$(j).removeClass("overflow-right")}if(e>=d&&k>=d){$(j).addClass("overflow-left")}else{$(j).removeClass("overflow-left")}}function b(e,k){var j=$(e).closest(".tab-overflow");var h=parseInt($(j).find(".nav.nav-tabs").css("margin-left"));var g=$(j).width();var d=0;var i=0;$(j).find("li").each(function(){if(!$(this).hasClass("next-button")&&!$(this).hasClass("prev-button")){d+=$(this).width()}});switch(k){case"next":var f=d+h-g;if(f<=g){i=f-h;setTimeout(function(){$(j).removeClass("overflow-right")},150)}else{i=g-h-80}if(i!=0){$(j).find(".nav.nav-tabs").animate({marginLeft:"-"+i+"px"},150,function(){$(j).addClass("overflow-left")})}break;case"prev":var f=-h;if(f<=g){$(j).removeClass("overflow-left");i=0}else{i=f-g+80}$(j).find(".nav.nav-tabs").animate({marginLeft:"-"+i+"px"},150,function(){$(j).addClass("overflow-right")});break}}function a(){$(".tab-overflow").each(function(){var g=$(this).width();var f=0;var d=$(this);var e=g;$(d).find("li").each(function(){var h=$(this);f+=$(h).width();if($(h).hasClass("active")&&f>g){e-=f}});c(this,0)})}$('[data-click="next-tab"]').live("click",function(d){d.preventDefault();b(this,"next")});$('[data-click="prev-tab"]').live("click",function(d){d.preventDefault();b(this,"prev")});$(window).resize(function(){$(".tab-overflow .nav.nav-tabs").removeAttr("style");a()});a()};var handleMobileSidebar=function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){if($("#page-container").hasClass("page-sidebar-minified")){$('#sidebar [data-scrollbar="true"]').css("overflow","visible");$('.page-sidebar-minified #sidebar [data-scrollbar="true"]').slimScroll({destroy:true});$('.page-sidebar-minified #sidebar [data-scrollbar="true"]').removeAttr("style");$(".page-sidebar-minified #sidebar [data-scrollbar=true]").trigger("mouseover")}}var a=0;$(".page-sidebar-minified .sidebar [data-scrollbar=true] a").live("touchstart",function(c){var d=c.originalEvent.touches[0]||c.originalEvent.changedTouches[0];var b=d.pageY;a=b-parseInt($(this).closest("[data-scrollbar=true]").css("margin-top"))});$(".page-sidebar-minified .sidebar [data-scrollbar=true] a").live("touchmove",function(d){d.preventDefault();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var f=d.originalEvent.touches[0]||d.originalEvent.changedTouches[0];var b=f.pageY;var c=b-a;$(this).closest("[data-scrollbar=true]").css("margin-top",c+"px")}});$(".page-sidebar-minified .sidebar [data-scrollbar=true] a").live("touchend",function(f){var h=$(this).closest("[data-scrollbar=true]");var g=$(window).height();a=$(h).css("margin-top");var c=0;$(".sidebar").find(".nav").each(function(){c+=$(this).height()});var b=-parseInt(a)+$(".sidebar").height();if(b>=c){var d=g-c;$(h).animate({marginTop:d+"px"})}else{if(parseInt(a)>=0){$(h).animate({marginTop:"0px"})}}return true})};var App=function(){return{init:function(){handleSlimScroll();handlePanelAction();handelTooltipPopoverActivation();handlePageContentView();handleAfterPageLoadAddClass();handlePaceLoadingPlugins();handleScrollToTopButton();handleSidebarMenu();handleMobileSidebarToggle();handleSidebarMinify();handleMobileSidebar();handleSidebarAjaxClick();handleIEFullHeightContent();handleUnlimitedTabsRender();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")},cache:true})},setPageTitle:function(a){document.title=a},restartGlobalFunction:function(){handleSlimScroll();handlePanelAction();handelTooltipPopoverActivation();handleAfterPageLoadAddClass();handleUnlimitedTabsRender()}}}();